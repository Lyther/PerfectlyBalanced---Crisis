namespace = pbcrisis

### Sentinels

country_event = {
    id = pbcrisis.20
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        is_country_type = global_event
        has_global_flag = ghost_signal_5_flag
        NOT = {
            has_global_flag = pbcrisis_sentinels_modifier_initialized
            has_global_flag = cybrex_destroyed
        }
    }
    immediate = {
        every_country = {
            limit = {
                is_country_type = ai_empire
            }
            country_event = {
                id = pbcrisis.21
            }
        }
    }
}

country_event = {
    id = pbcrisis.21
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        NOT = {
            has_global_flag = pbcrisis_sentinels_modifier_initialized
            has_global_flag = cybrex_destroyed
        }
    }
    immediate = {
        if = {
            limit = {
                has_global_flag = pbcrisis_general_customization
            }
            if = {
                limit = {
                    has_global_flag = pbcrisis_general_difficulty_default
                }
                set_variable = {
                    which = pbcrisis_global_difficulty
                    value = 1
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_general_difficulty_low
                }
                set_variable = {
                    which = pbcrisis_global_difficulty
                    value = 5
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_general_difficulty_medium
                }
                set_variable = {
                    which = pbcrisis_global_difficulty
                    value = 10
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_general_difficulty_high
                }
                set_variable = {
                    which = pbcrisis_global_difficulty
                    value = 25
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_general_difficulty_nightmire
                }
                set_variable = {
                    which = pbcrisis_global_difficulty
                    value = 100
                }
            }
        }
        else_if = {
            limit = {
                has_global_flag = pbcrisis_detailed_customization
            }
            if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_aggressive_default
                }
                set_variable = {
                    which = pbcrisis_fleet_aggressive
                    value = 1
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_aggressive_low
                }
                set_variable = {
                    which = pbcrisis_fleet_aggressive
                    value = 5
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_aggressive_medium
                }
                set_variable = {
                    which = pbcrisis_fleet_aggressive
                    value = 10
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_aggressive_high
                }
                set_variable = {
                    which = pbcrisis_fleet_aggressive
                    value = 25
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_aggressive_nightmire
                }
                set_variable = {
                    which = pbcrisis_fleet_aggressive
                    value = 100
                }
            }
            if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_defensive_default
                }
                set_variable = {
                    which = pbcrisis_fleet_defensive
                    value = 1
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_defensive_low
                }
                set_variable = {
                    which = pbcrisis_fleet_defensive
                    value = 5
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_defensive_medium
                }
                set_variable = {
                    which = pbcrisis_fleet_defensive
                    value = 10
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_defensive_high
                }
                set_variable = {
                    which = pbcrisis_fleet_defensive
                    value = 25
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_defensive_nightmire
                }
                set_variable = {
                    which = pbcrisis_fleet_defensive
                    value = 100
                }
            }
            if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_strategic_default
                }
                set_variable = {
                    which = pbcrisis_fleet_strategic
                    value = 1
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_strategic_low
                }
                set_variable = {
                    which = pbcrisis_fleet_strategic
                    value = 5
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_strategic_medium
                }
                set_variable = {
                    which = pbcrisis_fleet_strategic
                    value = 10
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_strategic_high
                }
                set_variable = {
                    which = pbcrisis_fleet_strategic
                    value = 25
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_strategic_nightmire
                }
                set_variable = {
                    which = pbcrisis_fleet_strategic
                    value = 100
                }
            }
            if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_army_default
                }
                set_variable = {
                    which = pbcrisis_army
                    value = 1
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_army_low
                }
                set_variable = {
                    which = pbcrisis_army
                    value = 5
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_army_medium
                }
                set_variable = {
                    which = pbcrisis_army
                    value = 10
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_army_high
                }
                set_variable = {
                    which = pbcrisis_army
                    value = 25
                }
            }
            else_if = {
                limit = {
                    has_global_flag = pbcrisis_detailed_difficulty_army_nightmire
                }
                set_variable = {
                    which = pbcrisis_army
                    value = 100
                }
            }
        }
        if = {
            limit = {
                has_global_flag = pbcrisis_detailed_customization
            }
            add_modifier = {
                modifier = sentinels_fleet_aggressive
                multiplier = pbcrisis_fleet_aggressive
            }
            add_modifier = {
                modifier = sentinels_fleet_defensive
                multiplier = pbcrisis_fleet_defensive
            }
            add_modifier = {
                modifier = sentinels_fleet_strategic
                multiplier = pbcrisis_fleet_strategic
            }
            add_modifier = {
                modifier = sentinels_army
                multiplier = pbcrisis_army
            }
        }
        else_if = {
            add_modifier = {
                modifier = sentinels_fleet_aggressive
                multiplier = pbcrisis_global_difficulty
            }
            add_modifier = {
                modifier = sentinels_fleet_defensive
                multiplier = pbcrisis_global_difficulty
            }
            add_modifier = {
                modifier = sentinels_fleet_strategic
                multiplier = pbcrisis_global_difficulty
            }
            add_modifier = {
                modifier = sentinels_army
                multiplier = pbcrisis_global_difficulty
            }
        }
        set_global_flag = pbcrisis_sentinels_modifier_initialized
    }
}